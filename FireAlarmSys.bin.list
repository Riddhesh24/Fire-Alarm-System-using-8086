EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
FireAlarmSys.bin -- emu8086 assembler version: 4.08  
 
[ 24-04-2019  --  03:55:08 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       
[   2]        :                                       #make_bin#
[   3]        :                                       
[   4]        :                                       #LOAD_SEGMENT=FFFFh#
[   5]        :                                       #LOAD_OFFSET=0000h#
[   6]        :                                       
[   7]        :                                       #CS=0000h#
[   8]        :                                       #IP=0000h#
[   9]        :                                       
[  10]        :                                       #DS=0000h#
[  11]        :                                       #ES=0000h#
[  12]        :                                       
[  13]        :                                       #SS=0000h#
[  14]        :                                       #SP=1FFEh#
[  15]        :                                       
[  16]        :                                       #AX=0000h#
[  17]        :                                       #BX=0000h#
[  18]        :                                       #CX=0000h#
[  19]        :                                       #DX=0000h#
[  20]        :                                       #SI=0000h#
[  21]        :                                       #DI=0000h#
[  22]        :                                       #BP=0000h#
[  23]        :                                       
[  24]    0000: E9 FE 03                              	jmp    st1
[  25]    0003: 00 00 00 00 00 00 00 00 00 00 00 00   db     509 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00                      
[  26]        :                                       	
[  27]        :                                       	;IVT entry for 80H
[  28]    0200: 00                                    count 		db		00h
[  29]    0201: 8F 05                                 	dw     t_isr
[  30]    0203: 00 00                                 	dw     0000
[  31]    0205: 00 00 00 00 00 00 00 00 00 00 00 00   	db     508 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  32]        :                                       
[  33]    0401: FA                                    st1: cli
[  34]        :                                       	; intialize ds, es,ss to start of RAM
[  35]    0402: B8 00 01                              mov       ax,0100h
[  36]    0405: 8E D8                                 mov       ds,ax
[  37]    0407: 8E C0                                 mov       es,ax
[  38]    0409: 8E D0                                 mov       ss,ax
[  39]    040B: BC FE FF                              mov       sp,0FFFEH
[  40]        :                                       	
[  41]        :                                       ;initialize 8255
[  42]        :                                       	;portA	equ	0000h
[  43]        :                                       	;portB	equ 0002h
[  44]        :                                       	;portC	equ	0004h
[  45]        :                                       	;creg	equ	0006h
[  46]        :                                       
[  47]    040E: B0 91                                 	mov al, 10010001b					; portA = input, portB = output, portC lower = input, portC upper = output
[  48]    0410: E6 06                                 	out 0006H, al
[  49]        :                                       	
[  50]        :                                       	;enables the motors, rotates the motors in the clockwise direction, enables gate for clock0 for 500 clock pulses
[  51]        :                                       	
[  52]    0412: B0 00                                 	mov al, 00000000b		;Resets ADC	
[  53]    0414: E6 04                                 	out 0004H, al
[  54]        :                                       	
[  55]        :                                       	
[  56]        :                                       	;8259 - 18H to 1AH
[  57]        :                                       	;8259 -	enable IRO alone use AEOI	
[  58]    0416: B0 13                                 	mov       al,00010011b		;icw1
[  59]    0418: E6 18                                 	out       18h,al
[  60]    041A: B0 80                                 	mov       al,10000000b    	;icw2
[  61]    041C: E6 1A                                 	out       1Ah,al
[  62]    041E: B0 03                                 	mov       al,00000011b		;icw4
[  63]    0420: E6 1A                                 	out       1Ah,al
[  64]    0422: B0 FE                                 	mov       al,11111110b		;ocw1
[  65]    0424: E6 1A                                 	out       1Ah,al
[  66]        :                                       		
[  67]    0426: B0 D0                                 A:	mov al, 11010000b 	;EOC
[  68]    0428: E6 04                                 	out 0004H, al
[  69]        :                                       	
[  70]        :                                       	;initialize 8253
[  71]    042A: FB                                    	sti				
[  72]        :                                       
[  73]    042B:                                       x1: ;cnt0	equ	0010h
[  74]        :                                       	;cnt1	equ	0012h
[  75]        :                                       	;cnt2	equ	0014h
[  76]        :                                       	;0016h	equ	0016h
[  77]        :                                       	
[  78]    042B: B0 36                                 	mov al,00110110b; load counter to mode 2
[  79]    042D: E6 16                                 	out 0016H, al
[  80]        :                                       	
[  81]    042F: B0 10                                 	mov al,10h; load count 10000 in the counter
[  82]    0431: E6 10                                 	out 0010H, al
[  83]        :                                       	
[  84]    0433: B0 27                                 	mov al,27h;
[  85]    0435: E6 10                                 	out 0010H, al
[  86]        :                                       	
[  87]    0437: B0 09                                 	mov al,00001001b
[  88]    0439: E6 04                                 	out 0004h,al		; port C gate enable
[  89]    043B: B0 00                                 	mov al, 00000000b
[  90]    043D: E6 02                                 	out 0002h, al 	;send address 000 to ADC
[  91]        :                                       	
[  92]    043F: B0 40                                 	mov al, 01000000b;set ALE
[  93]    0441: E6 02                                 	out 0002h, al 	
[  94]        :                                       	
[  95]    0443: B0 60                                 	mov al, 01100000b;set Start
[  96]    0445: E6 02                                 	out 0002h, al 	
[  97]        :                                       	
[  98]    0447: B0 40                                 	mov al, 01000000b;set ALE and clear start
[  99]    0449: E6 02                                 	out 0002h, al	
[ 100]        :                                       	;input of smoke sensor 0
[ 101]        :                                       	
[ 102]    044B: E4 04                                 x2 :in al, 0004h	
[ 103]    044D: 24 01                                 	and al, 01h
[ 104]    044F: 3C 01                                 	cmp al, 01h
[ 105]    0451: 90 90                                 	jnz x2			;if EOC is low, loop back to x2, else proceed
[ 106]    0453: B0 00                                 	mov al, 00000000b
[ 107]    0455: E6 02                                 	out 0002h, al
[ 108]        :                                       	
[ 109]    0457: E4 00                                 	in al, 0000h	;since EOC is high, take the input from the ADC of smoke sensor 0
[ 110]    0459: E6 02                                 	out 0002h, al
[ 111]        :                                       	
[ 112]    045B: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 113]    045D: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 114]    045F: 76 04                                 	jna  x21		;if al<= danger level count is not increased else increased
[ 115]    0461: FE 06 00 02                           	inc count
[ 116]        :                                       	
[ 117]    0465: 8A D8                                 x21:mov bl, al		
[ 118]    0467: B0 00                                 	mov al, 00h
[ 119]        :                                       	
[ 120]    0469: B0 80                                 	mov al, 10000000b
[ 121]    046B: E6 02                                 	out 0002h, al 	;send address 001 to ADC
[ 122]        :                                       	
[ 123]    046D: B0 C0                                 	mov al, 11000000b ;set ALE
[ 124]    046F: E6 02                                 	out 0002h, al 	
[ 125]        :                                       	
[ 126]    0471: B0 E0                                 	mov al, 11100000b;Set Start
[ 127]    0473: E6 02                                 	out 0002h, al 	
[ 128]        :                                       	
[ 129]    0475: B0 C0                                 	mov al, 11000000b;Reset start
[ 130]    0477: E6 02                                 	out 0002h, al
[ 131]        :                                       	;input of smoke sensor 1
[ 132]        :                                       	
[ 133]    0479: E4 04                                 x3 :in al, 0004h	;polls for EOC signal
[ 134]    047B: 24 01                                 	and al, 01h
[ 135]    047D: 3C 01                                 	cmp al, 01h
[ 136]    047F: B0 00                                 	mov al, 00000000b ;reset ADC
[ 137]    0481: E6 02                                 	out 0002h, al
[ 138]        :                                       	
[ 139]    0483: 90 90                                 	jnz x3			;if EOC is low, loop back to x3, else proceed
[ 140]    0485: B0 00                                 	mov al, 00000000b
[ 141]    0487: E6 02                                 	out 0002h, al
[ 142]        :                                       	
[ 143]    0489: E4 00                                 	in al, 0000h	;since EOC is high, take the input from the ADC of smoke sensor 0
[ 144]    048B: E6 02                                 	out 0002h, al
[ 145]        :                                       	
[ 146]    048D: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 147]    048F: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 148]    0491: 76 04                                 	jna  x31		;if al<= danger level count is not increased else increased
[ 149]    0493: FE 06 00 02                           	inc count
[ 150]        :                                       	
[ 151]    0497: 8A D8                                 x31:mov bl, al		
[ 152]    0499: B0 00                                 	mov al, 00h
[ 153]        :                                       	
[ 154]    049B: B0 10                                 	mov al, 00010000b
[ 155]    049D: E6 02                                 	out 0002h, al 	;send address 010 to ADC
[ 156]        :                                       	
[ 157]    049F: B0 50                                 	mov al, 01010000b ;set ALE
[ 158]    04A1: E6 02                                 	out 0002h, al 	
[ 159]        :                                       	
[ 160]    04A3: B0 70                                 	mov al, 01110000b;Set Start
[ 161]    04A5: E6 02                                 	out 0002h, al 	
[ 162]        :                                       	
[ 163]    04A7: B0 50                                 	mov al, 01010000b;Reset start
[ 164]    04A9: E6 02                                 	out 0002h, al
[ 165]        :                                       	;input of smoke sensor 2
[ 166]        :                                       
[ 167]    04AB: E4 04                                 x4 :in al, 0004h	;polls for EOC signal
[ 168]    04AD: 24 01                                 	and al, 01h
[ 169]    04AF: 3C 01                                 	cmp al, 01h
[ 170]    04B1: B0 00                                 	mov al, 00000000b ;reset ADC
[ 171]    04B3: E6 02                                 	out 0002h, al
[ 172]        :                                       	
[ 173]    04B5: 90 90                                 	jnz x4			;if EOC is low, loop back to x4, else proceed
[ 174]    04B7: B0 00                                 	mov al, 00h
[ 175]        :                                       	
[ 176]    04B9: E4 00                                 	in al, 0000h	;since EOC is high, take input from ADC of smoke sensor 2
[ 177]    04BB: E6 02                                 	out 0002h, al
[ 178]        :                                       	
[ 179]    04BD: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 180]    04BF: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 181]    04C1: 76 04                                 	jna  x41		;if al<= danger level count is not increased else increased
[ 182]    04C3: FE 06 00 02                           	inc count
[ 183]        :                                       	
[ 184]    04C7: 80 3E 00 02 01                        x41:cmp count,01d
[ 185]    04CC: 74 05                                 	je x5		;if count=1 ring only warning alarm
[ 186]    04CE: 77 10                                 	ja x6		;if count>1 ring fire alarm and open windows,valve and doors
[ 187]    04D0: E9 BA 00                              	jmp x0		;define x0 later
[ 188]        :                                       	
[ 189]    04D3: B0 00                                 x5: mov al, 00000000b
[ 190]    04D5: E6 02                                 	out 0002h, al
[ 191]        :                                       		
[ 192]    04D7: B0 80                                 	mov al, 10000000b
[ 193]    04D9: E6 04                                 	out 0004h, al	;ringing the warning alarm
[ 194]        :                                       	
[ 195]    04DB: B2 00                                 	mov dl, 00h		;set state of doors, windows, valves as open and raise alarm
[ 196]    04DD: E9 4B FF                              	jmp x1;  		GO TO THE END OF PROGRAM....................
[ 197]        :                                       	
[ 198]    04E0: B0 00                                 x6: mov al, 00000000b
[ 199]    04E2: E6 02                                 	out 0002h, al
[ 200]        :                                       		
[ 201]    04E4: B0 30                                 	mov al, 00110000b
[ 202]    04E6: E6 04                                 	out 0004h, al	;rotating the motors in clockwise direction
[ 203]        :                                       	
[ 204]    04E8: B2 01                                 	mov dl, 01h		;set state of doors, windows, valves as open and raise alarm
[ 205]        :                                       	
[ 206]    04EA: B0 00                                 x99:mov al, 00000000b	
[ 207]    04EC: E6 02                                 	out 0002h, al 	;send address 000 to ADC
[ 208]        :                                       	
[ 209]        :                                       	; CHECKING IF SMOKE HAS REDUCED
[ 210]    04EE: 80 26 00 02 00                        	and count,00h
[ 211]    04F3: B0 40                                 	mov al, 01000000b	;set ALE
[ 212]    04F5: E6 02                                 	out 0002h, al 	
[ 213]        :                                       	
[ 214]    04F7: B0 60                                 	mov al, 01100000b
[ 215]    04F9: E6 02                                 	out 0002h, al 	
[ 216]        :                                       	
[ 217]    04FB: B0 40                                 	mov al, 01000000b
[ 218]    04FD: E6 02                                 	out 0002h, al	
[ 219]        :                                       	
[ 220]        :                                       	
[ 221]    04FF: E4 04                                 x7:in al, 0004h	;polls for EOC signal
[ 222]    0501: 24 01                                 	and al, 01h
[ 223]    0503: 3C 01                                 	cmp al, 01h
[ 224]    0505: 75 F8                                 	jnz x7			;if EOC is low, loop back to x7, else proceed
[ 225]    0507: B0 00                                 	mov al, 00000000b
[ 226]    0509: E6 02                                 	out 0002h, al
[ 227]        :                                       	
[ 228]    050B: E4 00                                 	in al, 0000h	;since EOC is high, take the input from the ADC of smoke sensor 0
[ 229]    050D: E6 02                                 	out 0002h, al
[ 230]        :                                       	
[ 231]    050F: B1 93                                 	mov cl, 93h
[ 232]    0511: 3A C1                                 	cmp al, cl		;compare al with an arbitrary value
[ 233]    0513: 76 04                                 	jna x71			;if al <= danger level, jump to x17
[ 234]    0515: FE 06 00 02                           	inc count
[ 235]    0519: 8A D8                                 x71:mov bl, al		
[ 236]    051B: B0 00                                 	mov al, 00h
[ 237]        :                                       	
[ 238]    051D: B0 80                                 	mov al, 10000000b
[ 239]    051F: E6 02                                 	out 0002h, al 	;send address 001 to ADC
[ 240]        :                                       	
[ 241]    0521: B0 C0                                 	mov al, 11000000b
[ 242]    0523: E6 02                                 	out 0002h, al 	
[ 243]        :                                       	
[ 244]    0525: B0 E0                                 	mov al, 11100000b
[ 245]    0527: E6 02                                 	out 0002h, al 	
[ 246]        :                                       	
[ 247]    0529: B0 C0                                 	mov al, 11000000b
[ 248]    052B: E6 02                                 	out 0002h, al	
[ 249]        :                                       	
[ 250]    052D: E4 04                                 x8:	in al, 0004h	;polls for EOC signal
[ 251]    052F: 24 01                                 	and al, 01h
[ 252]    0531: 3C 01                                 	cmp al, 01h
[ 253]    0533: B0 00                                 	mov al, 00000000b
[ 254]    0535: E6 02                                 	out 0002h, al
[ 255]        :                                       	
[ 256]    0537: 75 F4                                 	jnz x8			;if EOC is low, loop back to x8, else proceed
[ 257]        :                                       	
[ 258]    0539: B0 00                                 	mov al, 00h
[ 259]        :                                       	
[ 260]    053B: E4 00                                 	in al, 0000h	;since EOC is high, take input from ADC of smoke sensor 1
[ 261]    053D: E4 00                                 	in al, 0000h
[ 262]    053F: E6 02                                 	out 0002h, al
[ 263]        :                                       	
[ 264]    0541: B1 93                                 	mov cl, 93h
[ 265]    0543: 3A C1                                 	cmp al, cl		;compare al with the arbitrary value
[ 266]    0545: 76 04                                 	jna x81			;if al <= danger level, jump to x10
[ 267]    0547: FE 06 00 02                           	inc count
[ 268]    054B: 8A D8                                 x81:mov bl, al		
[ 269]    054D: B0 00                                 	mov al, 00h
[ 270]        :                                       	
[ 271]    054F: B0 10                                 	mov al, 00010000b
[ 272]    0551: E6 02                                 	out 0002h, al 	;send address 010 to ADC
[ 273]        :                                       	
[ 274]    0553: B0 50                                 	mov al, 01010000b ;set ALE
[ 275]    0555: E6 02                                 	out 0002h, al 	
[ 276]        :                                       	
[ 277]    0557: B0 70                                 	mov al, 01110000b;Set Start
[ 278]    0559: E6 02                                 	out 0002h, al 	
[ 279]        :                                       	
[ 280]    055B: B0 50                                 	mov al, 01010000b;Reset start
[ 281]    055D: E6 02                                 	out 0002h, al
[ 282]        :                                       	;input of smoke sensor 2
[ 283]        :                                       
[ 284]    055F: E4 04                                 x9 :in al, 0004h	;polls for EOC signal
[ 285]    0561: 24 01                                 	and al, 01h
[ 286]    0563: 3C 01                                 	cmp al, 01h
[ 287]    0565: B0 00                                 	mov al, 00000000b ;reset ADC
[ 288]    0567: E6 02                                 	out 0002h, al
[ 289]        :                                       	
[ 290]    0569: 90 90                                 	jnz x9			;if EOC is low, loop back to x4, else proceed
[ 291]    056B: B0 00                                 	mov al, 00h
[ 292]        :                                       	
[ 293]    056D: E4 00                                 	in al, 0000h	;since EOC is high, take input from ADC of smoke sensor 2
[ 294]    056F: E6 02                                 	out 0002h, al
[ 295]        :                                       	
[ 296]    0571: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 297]    0573: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 298]    0575: 76 04                                 	jna  x91		;if al<= danger level count is not increased else increased
[ 299]    0577: FE 06 00 02                           	inc count
[ 300]        :                                       	
[ 301]    057B: 80 3E 00 02 00                        x91:cmp count,00d
[ 302]    0580: 76 03 E9 65 FF                        	ja x99		;if count>1 ring only warning alarm
[ 303]    0585: EB 00                                 	jmp xa		
[ 304]        :                                       	
[ 305]    0587:                                       xa: ;close doors, windows,valve and sound alarm
[ 306]        :                                       		
[ 307]    0587: B0 40                                 	mov al, 01000000b
[ 308]    0589: E6 04                                 	out 0004h, al			
[ 309]        :                                       	
[ 310]    058B: B2 00                                 	mov dl, 00h				;set previous state
[ 311]    058D: EB FE                                 x0: jmp x0  		; initial run till an interrupt is raised
[ 312]        :                                       
[ 313]    058F:                                       t_isr:
[ 314]        :                                       ; IVT code
[ 315]        :                                       	
[ 316]    058F:                                       y1:	;cnt0	equ	0010h
[ 317]        :                                       	;cnt1	equ	0012h
[ 318]        :                                       	;cnt2	equ	0014h
[ 319]        :                                       	;0016h	equ	0016h
[ 320]        :                                       	
[ 321]    058F: B0 30                                 	mov al, 00110000b; interrupt on T/C
[ 322]    0591: E6 16                                 	out 0016H, al
[ 323]        :                                       	
[ 324]    0593: B0 15                                 	mov al, 00010101b; rate generator
[ 325]    0595: E6 10                                 	out 0010H, al
[ 326]        :                                       	
[ 327]    0597: B0 00                                 	mov al, 00h;loads 00 in counter 0
[ 328]    0599: E6 10                                 	out 0010H, al
[ 329]        :                                       	
[ 330]    059B: B0 10                                 	mov al,00010000b
[ 331]    059D: E6 04                                 	out 0004h,al		; port C gate enable
[ 332]    059F: B0 00                                 	mov al, 00000000b
[ 333]    05A1: E6 02                                 	out 0002h, al 	;send address 000 to ADC
[ 334]        :                                       	
[ 335]    05A3: B0 40                                 	mov al, 01000000b;set ALE
[ 336]    05A5: E6 02                                 	out 0002h, al 	
[ 337]        :                                       	
[ 338]    05A7: B0 60                                 	mov al, 01100000b;set Start
[ 339]    05A9: E6 02                                 	out 0002h, al 	
[ 340]        :                                       	
[ 341]    05AB: B0 40                                 	mov al, 01000000b;set ALE and clear start
[ 342]    05AD: E6 02                                 	out 0002h, al	
[ 343]        :                                       	;input of smoke sensor 0
[ 344]        :                                       	
[ 345]    05AF: E4 04                                 y2 :in al, 0004h	
[ 346]    05B1: 24 01                                 	and al, 01h
[ 347]    05B3: 3C 01                                 	cmp al, 01h
[ 348]    05B5: 90 90                                 	jnz y2			;if EOC is low, loop back to x2, else proceed
[ 349]    05B7: B0 00                                 	mov al, 00000000b
[ 350]    05B9: E6 02                                 	out 0002h, al
[ 351]        :                                       	
[ 352]    05BB: E4 00                                 	in al, 0000h	;since EOC is high, take the input from the ADC of smoke sensor 0
[ 353]    05BD: E6 02                                 	out 0002h, al
[ 354]        :                                       	
[ 355]    05BF: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 356]    05C1: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 357]    05C3: 76 04                                 	jna  y21		;if al<= danger level count is not increased else increased
[ 358]    05C5: FE 06 00 02                           	inc count
[ 359]        :                                       	
[ 360]    05C9: 8A D8                                 y21:mov bl, al		
[ 361]    05CB: B0 00                                 	mov al, 00h
[ 362]        :                                       	
[ 363]    05CD: B0 80                                 	mov al, 10000000b
[ 364]    05CF: E6 02                                 	out 0002h, al 	;send address 001 to ADC
[ 365]        :                                       	
[ 366]    05D1: B0 C0                                 	mov al, 11000000b ;set ALE
[ 367]    05D3: E6 02                                 	out 0002h, al 	
[ 368]        :                                       	
[ 369]    05D5: B0 E0                                 	mov al, 11100000b;Set Start
[ 370]    05D7: E6 02                                 	out 0002h, al 	
[ 371]        :                                       	
[ 372]    05D9: B0 C0                                 	mov al, 11000000b;Reset start
[ 373]    05DB: E6 02                                 	out 0002h, al
[ 374]        :                                       	;input of smoke sensor 1
[ 375]        :                                       	
[ 376]    05DD: E4 04                                 y3 :in al, 0004h	;polls for EOC signal
[ 377]    05DF: 24 01                                 	and al, 01h
[ 378]    05E1: 3C 01                                 	cmp al, 01h
[ 379]    05E3: B0 00                                 	mov al, 00000000b ;reset ADC
[ 380]    05E5: E6 02                                 	out 0002h, al
[ 381]        :                                       	
[ 382]    05E7: 90 90                                 	jnz y3			;if EOC is low, loop back to x3, else proceed
[ 383]    05E9: B0 00                                 	mov al, 00000000b
[ 384]    05EB: E6 02                                 	out 0002h, al
[ 385]        :                                       	
[ 386]    05ED: E4 00                                 	in al, 0000h	;since EOC is high, take the input from the ADC of smoke sensor 0
[ 387]    05EF: E6 02                                 	out 0002h, al
[ 388]        :                                       	
[ 389]    05F1: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 390]    05F3: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 391]    05F5: 76 04                                 	jna  y31		;if al<= danger level count is not increased else increased
[ 392]    05F7: FE 06 00 02                           	inc count
[ 393]        :                                       	
[ 394]    05FB: 8A D8                                 y31:mov bl, al		
[ 395]    05FD: B0 00                                 	mov al, 00h
[ 396]        :                                       	
[ 397]    05FF: B0 10                                 	mov al, 00010000b
[ 398]    0601: E6 02                                 	out 0002h, al 	;send address 010 to ADC
[ 399]        :                                       	
[ 400]    0603: B0 50                                 	mov al, 01010000b ;set ALE
[ 401]    0605: E6 02                                 	out 0002h, al 	
[ 402]        :                                       	
[ 403]    0607: B0 70                                 	mov al, 01110000b;Set Start
[ 404]    0609: E6 02                                 	out 0002h, al 	
[ 405]        :                                       	
[ 406]    060B: B0 50                                 	mov al, 01010000b;Reset start
[ 407]    060D: E6 02                                 	out 0002h, al
[ 408]        :                                       	;input of smoke sensor 2
[ 409]        :                                       
[ 410]    060F: E4 04                                 y4 :in al, 0004h	;polls for EOC signal
[ 411]    0611: 24 01                                 	and al, 01h
[ 412]    0613: 3C 01                                 	cmp al, 01h
[ 413]    0615: B0 00                                 	mov al, 00000000b ;reset ADC
[ 414]    0617: E6 02                                 	out 0002h, al
[ 415]        :                                       	
[ 416]    0619: 90 90                                 	jnz y4			;if EOC is low, loop back to x4, else proceed
[ 417]    061B: B0 00                                 	mov al, 00h
[ 418]        :                                       	
[ 419]    061D: E4 00                                 	in al, 0000h	;since EOC is high, take input from ADC of smoke sensor 2
[ 420]    061F: E6 02                                 	out 0002h, al
[ 421]        :                                       	
[ 422]    0621: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 423]    0623: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 424]    0625: 76 04                                 	jna y41		;if al<= danger level count is not increased else increased
[ 425]    0627: FE 06 00 02                           	inc count
[ 426]        :                                       	
[ 427]    062B: B5 01                                 y41:mov ch,01d
[ 428]    062D: 38 2E 00 02                           	cmp count,ch
[ 429]    0631: 74 05                                 	je y5		;if count=1 ring only warning alarm
[ 430]    0633: 77 10                                 	ja y6		;if count>1 ring fire alarm and open windows,valve and doors
[ 431]    0635: E9 BA 00                              	jmp y0		;go to iret
[ 432]        :                                       	
[ 433]    0638: B0 00                                 y5: mov al, 00000000b
[ 434]    063A: E6 02                                 	out 0002h, al
[ 435]        :                                       		
[ 436]    063C: B0 80                                 	mov al, 10000000b
[ 437]    063E: E6 04                                 	out 0004h, al	;ringing the warning alarm
[ 438]        :                                       	
[ 439]    0640: B2 00                                 	mov dl, 00h		;set state of doors, windows, valves as open and raise alarm
[ 440]    0642: E9 4A FF                              	jmp y1;  		GO TO THE END OF PROGRAM....................
[ 441]        :                                       	
[ 442]    0645: B0 00                                 y6: mov al, 00000000b
[ 443]    0647: E6 02                                 	out 0002h, al
[ 444]        :                                       		
[ 445]    0649: B0 30                                 	mov al, 00110000b
[ 446]    064B: E6 04                                 	out 0004h, al	;rotating the motors in clockwise direction
[ 447]        :                                       	
[ 448]    064D: B2 01                                 	mov dl, 01h		;set state of doors, windows, valves as open and raise alarm
[ 449]        :                                       	
[ 450]    064F: B0 00                                 y99:mov al, 00000000b	
[ 451]    0651: E6 02                                 	out 0002h, al 	;send address 000 to ADC
[ 452]        :                                       	
[ 453]        :                                       	; CHECKING IF SMOKE HAS REDUCED
[ 454]    0653: 80 26 00 02 00                        	and count,00h
[ 455]    0658: B0 40                                 	mov al, 01000000b
[ 456]    065A: E6 02                                 	out 0002h, al 	
[ 457]        :                                       	
[ 458]    065C: B0 60                                 	mov al, 01100000b
[ 459]    065E: E6 02                                 	out 0002h, al 	
[ 460]        :                                       	
[ 461]    0660: B0 40                                 	mov al, 01000000b
[ 462]    0662: E6 02                                 	out 0002h, al	
[ 463]        :                                       	
[ 464]        :                                       	
[ 465]    0664: E4 04                                 y7:in al, 0004h	;polls for EOC signal
[ 466]    0666: 24 01                                 	and al, 01h
[ 467]    0668: 3C 01                                 	cmp al, 01h
[ 468]    066A: 75 F8                                 	jnz y7			;if EOC is low, loop back to x7, else proceed
[ 469]    066C: B0 00                                 	mov al, 00000000b
[ 470]    066E: E6 02                                 	out 0002h, al
[ 471]        :                                       	
[ 472]    0670: E4 00                                 	in al, 0000h	;since EOC is high, take the input from the ADC of smoke sensor 0
[ 473]    0672: E6 02                                 	out 0002h, al
[ 474]        :                                       	
[ 475]    0674: B1 93                                 	mov cl, 93h
[ 476]    0676: 3A C1                                 	cmp al, cl		;compare al with an arbitrary value
[ 477]    0678: 76 04                                 	jna y71			;if al <= danger level, jump to x17
[ 478]    067A: FE 06 00 02                           	inc count
[ 479]    067E: 8A D8                                 y71:mov bl, al		
[ 480]    0680: B0 00                                 	mov al, 00h
[ 481]        :                                       	
[ 482]    0682: B0 80                                 	mov al, 10000000b
[ 483]    0684: E6 02                                 	out 0002h, al 	;send address 001 to ADC
[ 484]        :                                       	
[ 485]    0686: B0 C0                                 	mov al, 11000000b
[ 486]    0688: E6 02                                 	out 0002h, al 	
[ 487]        :                                       	
[ 488]    068A: B0 E0                                 	mov al, 11100000b
[ 489]    068C: E6 02                                 	out 0002h, al 	
[ 490]        :                                       	
[ 491]    068E: B0 C0                                 	mov al, 11000000b
[ 492]    0690: E6 02                                 	out 0002h, al	
[ 493]        :                                       	
[ 494]    0692: E4 04                                 y8:	in al, 0004h	;polls for EOC signal
[ 495]    0694: 24 01                                 	and al, 01h
[ 496]    0696: 3C 01                                 	cmp al, 01h
[ 497]    0698: B0 00                                 	mov al, 00000000b
[ 498]    069A: E6 02                                 	out 0002h, al
[ 499]        :                                       	
[ 500]    069C: 75 F4                                 	jnz y8			;if EOC is low, loop back to x8, else proceed
[ 501]        :                                       	
[ 502]    069E: B0 00                                 	mov al, 00h
[ 503]        :                                       	
[ 504]    06A0: E4 00                                 	in al, 0000h	;since EOC is high, take input from ADC of smoke sensor 1
[ 505]    06A2: E4 00                                 	in al, 0000h
[ 506]    06A4: E6 02                                 	out 0002h, al
[ 507]        :                                       	
[ 508]    06A6: B1 93                                 	mov cl, 93h
[ 509]    06A8: 3A C1                                 	cmp al, cl		;compare al with the arbitrary value
[ 510]    06AA: 76 04                                 	jna y81			;if al <= danger level, jump to x10
[ 511]    06AC: FE 06 00 02                           	inc count
[ 512]    06B0: 8A D8                                 y81:mov bl, al		
[ 513]    06B2: B0 00                                 	mov al, 00h
[ 514]        :                                       	
[ 515]    06B4: B0 10                                 	mov al, 00010000b
[ 516]    06B6: E6 02                                 	out 0002h, al 	;send address 010 to ADC
[ 517]        :                                       	
[ 518]    06B8: B0 50                                 	mov al, 01010000b ;set ALE
[ 519]    06BA: E6 02                                 	out 0002h, al 	
[ 520]        :                                       	
[ 521]    06BC: B0 70                                 	mov al, 01110000b;Set Start
[ 522]    06BE: E6 02                                 	out 0002h, al 	
[ 523]        :                                       	
[ 524]    06C0: B0 50                                 	mov al, 01010000b;Reset start
[ 525]    06C2: E6 02                                 	out 0002h, al
[ 526]        :                                       	;input of smoke sensor 2
[ 527]        :                                       
[ 528]    06C4: E4 04                                 y9 :in al, 0004h	;polls for EOC signal
[ 529]    06C6: 24 01                                 	and al, 01h
[ 530]    06C8: 3C 01                                 	cmp al, 01h
[ 531]    06CA: B0 00                                 	mov al, 00000000b ;reset ADC
[ 532]    06CC: E6 02                                 	out 0002h, al
[ 533]        :                                       	
[ 534]    06CE: 90 90                                 	jnz y9			;if EOC is low, loop back to x4, else proceed
[ 535]    06D0: B0 00                                 	mov al, 00h
[ 536]        :                                       	
[ 537]    06D2: E4 00                                 	in al, 0000h	;since EOC is high, take input from ADC of smoke sensor 2
[ 538]    06D4: E6 02                                 	out 0002h, al
[ 539]        :                                       	
[ 540]    06D6: B1 90                                 	mov cl, 90h		;CL has threshold smoke value(90h)
[ 541]    06D8: 3A C1                                 	cmp al, cl		;compare al with the threshold value
[ 542]    06DA: 76 04                                 	jna  y91		;if al<= danger level count is not incressased else increased
[ 543]    06DC: FE 06 00 02                           	inc count
[ 544]        :                                       	
[ 545]    06E0: 80 3E 00 02 00                        y91:cmp count,00d
[ 546]    06E5: 76 03 E9 65 FF                        	ja y99		;if count>1 ring only warning alarm
[ 547]    06EA: EB 00                                 	jmp ya		
[ 548]        :                                       	
[ 549]    06EC:                                       ya: ;close doors, windows,valve and sound alarm
[ 550]        :                                       		
[ 551]    06EC: B0 40                                 	mov al, 01000000b
[ 552]    06EE: E6 04                                 	out 0004h, al			
[ 553]        :                                       	
[ 554]    06F0: B2 00                                 	mov dl, 00h				;set previous state
[ 555]        :                                       
[ 556]    06F2:                                       y0:
[ 557]    06F2: CF                                    	iret	
[ 558]        :                                       	
[ 559]        :                                       	
[ 560]        :                                       	
[ 561]        :                                       
[ 562]        :                                       
 
===================================================================================================
 




===================================================================================================
